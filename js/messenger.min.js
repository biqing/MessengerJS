window.Messenger=function(){function a(a,b){var c="";if(arguments.length<2?c="target error - target and name are both requied":"object"!=typeof a?c="target error - target itself must be window object":"string"!=typeof b&&(c="target error - target name must be string type"),c)throw new Error(c);this.target=a,this.name=b}function b(a){this.targets={},this.name=a,this.listenFunc=[],this.initListen()}var c="[PROJECT_NAME]",d="postMessage"in window;return a.prototype.send=d?function(a){this.target.postMessage(c+a,"*")}:function(a){var b=window.navigator[c+this.name];if("function"!=typeof b)throw new Error("target callback function is not defined");b(c+a,window)},b.prototype.addTarget=function(b,c){var d=new a(b,c);this.targets[c]=d},b.prototype.initListen=function(){var a=this,b=function(b){"object"==typeof b&&b.data&&(b=b.data),b=b.slice(c.length);for(var d=0;d<a.listenFunc.length;d++)a.listenFunc[d](b)};d?"addEventListener"in document?window.addEventListener("message",b,!1):"attachEvent"in document&&window.attachEvent("onmessage",b):window.navigator[c+this.name]=b},b.prototype.listen=function(a){this.listenFunc.push(a)},b.prototype.send=function(a){var b,c=this.targets;for(b in c)c.hasOwnProperty(b)&&c[b].send(a)},b}();